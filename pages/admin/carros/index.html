<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RentWheels Login</title>
    <link rel="stylesheet" href="carros.css">
</head>
<body>
    <nav>
        <a href="/">
            <img src="/assets/hotwheels.png" alt="Logo">
        </a>
        
        <div class="nav-items">
            <div class="nav-links">
                <a href="/pages/catalogo/index.html">Catálogo</a>
                <a href=""></a>
                <a href=""></a>
            </div>
            <a href="../../login/">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 19.7823C18 18.2488 17.3679 16.778 16.2426 15.6936C15.1174 14.6092 13.5913 14 12 14C10.4087 14 8.88258 14.6092 7.75736 15.6936C6.63214 16.778 6 18.2488 6 19.7823" fill="white"/>
                    <path d="M18 19.7823C18 18.2488 17.3679 16.778 16.2426 15.6936C15.1174 14.6092 13.5913 14 12 14C10.4087 14 8.88258 14.6092 7.75736 15.6936C6.63214 16.778 6 18.2488 6 19.7823C10.5545 22.7752 13.1886 22.703 18 19.7823Z" fill="white"/>
                    <path d="M18 19.7823C18 18.2488 17.3679 16.778 16.2426 15.6936C15.1174 14.6092 13.5913 14 12 14C10.4087 14 8.88258 14.6092 7.75736 15.6936C6.63214 16.778 6 18.2488 6 19.7823"  stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M18 19.7823C18 18.2488 17.3679 16.778 16.2426 15.6936C15.1174 14.6092 13.5913 14 12 14C10.4087 14 8.88258 14.6092 7.75736 15.6936C6.63214 16.778 6 18.2488 6 19.7823C10.5545 22.7752 13.1886 22.703 18 19.7823Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 14C14.2091 14 16 12.2091 16 10C16 7.79086 14.2091 6 12 6C9.79086 6 8 7.79086 8 10C8 12.2091 9.79086 14 12 14Z" stroke="white" stroke-width="0" stroke-linecap="round" fill="white" stroke-linejoin="round"/>
                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>    
            </a>
            
        </div>
    </nav>
    <div class="fix-height"></div>
    <main>
        <div class="login-container">
            <form class="login-form">
                <h2>Adicionar carro</h2>
                <div class="input-group">
                    <label for="name">Nome</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="input-group">
                    <label for="description">Descrição</label>
                    <textarea id="description" name="description" required></textarea>
                </div>
                <div class="input-group">
                    <label for="imgUrl">URL da Imagem</label>
                    <input type="text" id="imgUrl" name="imgUrl" required>
                </div>
                <div class="input-group">
                    <label for="price">Preço</label>
                    <input type="number" min="0" step="0.01" id="price" name="price" required>
                </div>
                <button type="submit" class="btn">Criar</button>
                
            </form>
        </div>


        <!DOCTYPE html>

    <div class="dashboard-wrapper">
        <div class="dashboard-container">
            <header class="header">
                <h1>Lista de carros</h1>
            </header>
            <main class="main-content">
                <table class="product-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Foto</th>
                            <th>Nome</th>
                            <th>Descrição</th>
                            <th>Preço</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="product-table">
                        <tr>
                            <td>1</td>
                            <td><img src="/assets/amarilo.png"></td>
                            <td>Electronics</td>
                            <td>$699.00</td>
                            <td>50</td>
                            <td>
                                <button class="delete-btn">Remover</button>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Laptop</td>
                            <td>Computers</td>
                            <td>$999.00</td>
                            <td>20</td>
                            <td>
                                <button class="delete-btn">Remover</button>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Headphones</td>
                            <td>Accessories</td>
                            <td>$199.00</td>
                            <td>100</td>
                            <td>
                                <button class="delete-btn">Remover</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </main>
        </div>
    </div>

    </main>
    <script type="module">
        import { addCar, getCars, remCar } from '../admin.js';
        function $(e){
            return document.querySelector(e)
        }
        $('.login-form').addEventListener("submit", function(event){
            event.preventDefault();
           addCar($('#name').value,$('#description').value,$('#imgUrl').value,$('#price').value)
           if(!alert('Carro adicionado com sucesso!')){window.location.reload();}
        })
        document.addEventListener("click", function(event){
            const clickedItem = event.target.closest('.delete-btn');

            if(clickedItem){
                if(confirm('Você quer remover mesmo?')){
                remCar(clickedItem.parentElement.parentElement.id)
                if(!alert('Carro removido com sucesso!')){window.location.reload();}
            }
            }
        })

        

        function renderProducts(){
            const productTable = document.querySelector('#product-table')
            productTable.innerHTML = ''

            const products = getCars()
            

            products.forEach( async (e,i) => {
                if(i <=2){
                    const productCard = document.createElement('tr');
                productCard.setAttribute('id', i)
                productCard.innerHTML = `
                            <td>${i}</td>
                            <td><img src="/assets/${e.picture}"></td>
                            <td>${e.name}</td>
                            <td>${e.description}</td>
                            <td>R$${e.pricePerDay}</td>
                            <td>
                                <button class="delete-btn">Remover</button>
                            </td>`
                productTable.appendChild(productCard)
                document.querySelector(`#img-container-${i}`).style.backgroundColor = `rgb(${await getDominantColor(document.getElementById(`img-${i}`).src)})`

                }
            });

            
        }
        renderProducts()
        
    </script>
</body>
</html>
